
var wallTypes = [];

wallTypes["63"] = 'w_south';
wallTypes["383"] = 'w_south';
wallTypes["191"] = 'w_south';
wallTypes["120"] = 'w_south';

wallTypes["504"] = 'w_north';
wallTypes["505"] = 'w_north';
wallTypes["506"] = 'w_north';
wallTypes["508"] = 'w_north';
wallTypes["509"] = 'w_north';
wallTypes["248"] = 'w_north';

wallTypes["219"] = 'w_east';
wallTypes["475"] = 'w_east';
wallTypes["479"] = 'w_east';
wallTypes["223"] = 'w_east';


wallTypes["502"] = 'w_west';
wallTypes["438"] = 'w_west';
wallTypes["439"] = 'w_west';
wallTypes["503"] = 'w_west';

// wallTypes["154"] = 'w_west';


wallTypes["319"] = 'w_south';
wallTypes["127"] = 'w_south';

wallTypes["510"] = 'w_northwest';
wallTypes["507"] = 'w_northeast';
wallTypes["27"] = 'w_northwest_i';


wallTypes["55"] = 'w_northeast_i';

// wallTypes["59"] = 'slim_ne';

wallTypes["312"] = 'slim';
wallTypes["57"] = 'slim';

// ?
wallTypes["248"] = 'w_southeast';
wallTypes["444"] = 'w_southwest';

wallTypes["255"] = 'w_southeast';


// To Change
wallTypes["50"] = 'center';
wallTypes["18"] = 'center';
wallTypes["22"] = 'center';
wallTypes["54"] = 'w_northeast_i';


wallTypes["447"] = 'w_southwest';

wallTypes["216"] = 'w_southwest_i';
wallTypes["432"] = 'w_southeast_i';
wallTypes["496"] = 'w_southeast_i';


wallTypes["463"] = 'empty';
wallTypes["448"] = 'empty';
wallTypes["258"] = 'empty';
wallTypes["452"] = 'empty';
wallTypes["449"] = 'empty';
wallTypes["8"] = 'empty';
wallTypes["71"] = 'empty';
wallTypes["73"] = 'empty';
wallTypes["79"] = 'empty';
wallTypes["292"] = 'empty';
wallTypes["207"] = 'empty';
wallTypes["295"] = 'empty';
wallTypes["484"] = 'empty';
wallTypes["457"] = 'empty';
wallTypes["455"] = 'empty';
wallTypes["39"] = 'empty';
wallTypes["15"] = 'empty';
wallTypes["40"] = 'empty';
wallTypes["75"] = 'empty';
wallTypes["77"] = 'empty';
wallTypes["132"] = 'empty';
wallTypes["257"] = 'empty';
wallTypes["66"] = 'empty';
wallTypes["5"] = 'empty';
wallTypes["6"] = 'empty';
wallTypes["128"] = 'empty';
wallTypes["224"] = 'empty';
wallTypes["260"] = 'empty';
wallTypes["392"] = 'empty';
wallTypes["162"] = 'empty';
wallTypes["266"] = 'empty';
wallTypes["263"] = 'empty';
wallTypes["3"] = 'empty';
wallTypes["33"] = 'empty';
wallTypes["129"] = 'empty';
wallTypes["10"] = 'empty';
wallTypes["135"] = 'empty';
wallTypes["450"] = 'empty';
wallTypes["453"] = 'empty';
wallTypes["44"] = 'empty';
wallTypes["34"] = 'empty';
wallTypes["68"] = 'empty';
wallTypes["7"] = 'empty';
wallTypes["480"] = 'empty';
wallTypes["32"] = 'empty';
wallTypes["256"] = 'empty';
wallTypes["136"] = 'empty';
wallTypes["1"] = 'empty';
wallTypes["4"] = 'empty';
wallTypes["64"] = 'empty';
wallTypes["0"] = 'empty';
wallTypes["161"] = 'empty';
wallTypes["264"] = 'empty';
wallTypes["420"] = 'empty';
wallTypes["294"] = 'empty';
wallTypes["293"] = 'empty';
wallTypes["302"] = 'empty';
wallTypes["487"] = 'empty';
wallTypes["492"] = 'empty';
wallTypes["356"] = 'empty';
wallTypes["456"] = 'empty';
wallTypes["201"] = 'empty';
wallTypes["107"] = 'empty';
wallTypes["105"] = 'empty';
wallTypes["329"] = 'empty';
wallTypes["2"] = 'empty';
wallTypes["300"] = 'empty';
wallTypes["195"] = 'empty';
wallTypes["390"] = 'empty';
wallTypes["288"] = 'empty';
wallTypes["36"] = 'empty';
wallTypes["65"] = 'empty';
wallTypes["72"] = 'empty';
wallTypes["9"] = 'empty';
wallTypes["391"] = 'empty';
wallTypes["199"] = 'empty';
wallTypes["192"] = 'empty';
wallTypes["384"] = 'empty';
wallTypes["493"] = 'empty';
wallTypes["365"] = 'empty';
wallTypes["364"] = 'empty';
wallTypes["359"] = 'empty';
wallTypes["335"] = 'empty';
wallTypes["361"] = 'empty';
wallTypes["485"] = 'empty';
wallTypes["454"] = 'empty';
wallTypes["109"] = 'empty';
wallTypes["461"] = 'empty';
wallTypes["451"] = 'empty';
wallTypes["301"] = 'empty';
wallTypes["130"] = 'empty';
wallTypes["321"] = 'empty';
wallTypes["70"] = 'empty';
wallTypes["96"] = 'empty';
wallTypes["12"] = 'empty';
wallTypes["100"] = 'empty';
wallTypes["388"] = 'empty';
wallTypes["140"] = 'empty';
wallTypes["458"] = 'empty';
wallTypes["226"] = 'empty';
wallTypes["489"] = 'empty';
wallTypes["133"] = 'empty';
wallTypes["164"] = 'empty';
wallTypes["352"] = 'empty';
wallTypes["45"] = 'empty';
wallTypes["367"] = 'empty';
wallTypes["167"] = 'empty';
wallTypes["160"] = 'empty';
wallTypes["103"] = 'empty';
wallTypes["143"] = 'empty';
wallTypes["265"] = 'empty';
wallTypes["418"] = 'empty';
wallTypes["423"] = 'empty';
wallTypes["271"] = 'empty';
wallTypes["429"] = 'empty';
wallTypes["74"] = 'empty';
wallTypes["320"] = 'empty';
wallTypes["386"] = 'empty';
wallTypes["193"] = 'empty';
wallTypes["333"] = 'empty';
wallTypes["205"] = 'empty';
wallTypes["13"] = 'empty';
wallTypes["328"] = 'empty';
wallTypes["67"] = 'empty';
wallTypes["134"] = 'empty';
wallTypes["324"] = 'empty';
wallTypes["296"] = 'empty';
wallTypes["481"] = 'empty';
wallTypes["459"] = 'empty';
wallTypes["228"] = 'empty';
wallTypes["387"] = 'empty';
wallTypes["262"] = 'empty';
wallTypes["194"] = 'empty';
wallTypes["97"] = 'empty';
wallTypes["290"] = 'empty';
wallTypes["139"] = 'empty';
wallTypes["69"] = 'empty';
wallTypes["76"] = 'empty';
wallTypes["131"] = 'empty';
wallTypes["111"] = 'empty';
wallTypes["482"] = 'empty';
wallTypes["460"] = 'empty';
wallTypes["421"] = 'empty';
wallTypes["357"] = 'empty';
wallTypes["200"] = 'empty';
wallTypes["38"] = 'empty';
wallTypes["168"] = 'empty';
wallTypes["137"] = 'empty';
wallTypes["203"] = 'empty';
wallTypes["259"] = 'empty';
wallTypes["289"] = 'empty';
wallTypes["141"] = 'empty';
wallTypes["104"] = 'empty';
wallTypes["106"] = 'empty';
wallTypes["14"] = 'empty';
wallTypes["360"] = 'empty';
wallTypes["399"] = 'empty';
wallTypes["394"] = 'empty';
wallTypes["322"] = 'empty';
wallTypes["138"] = 'empty';
wallTypes["261"] = 'empty';
wallTypes["169"] = 'empty';
wallTypes["42"] = 'empty';
wallTypes["416"] = 'empty';
wallTypes["46"] = 'empty';
wallTypes["35"] = 'empty';
wallTypes["11"] = 'empty';
wallTypes["41"] = 'empty';
wallTypes["331"] = 'empty';
wallTypes["488"] = 'empty';
wallTypes["397"] = 'empty';
wallTypes["486"] = 'empty';
wallTypes["108"] = 'empty';
wallTypes["354"] = 'empty';
wallTypes["428"] = 'empty';
wallTypes["327"] = 'empty';
wallTypes["422"] = 'empty';
wallTypes["196"] = 'empty';
wallTypes["172"] = 'empty';
wallTypes["330"] = 'empty';
wallTypes["323"] = 'empty';
wallTypes["37"] = 'empty';

wallTypes["511"] = 'solid';

wallTypes["310"] = 'w_northeast_i';
wallTypes["437"] = 'w_southeast_i';
wallTypes["436"] = 'w_southeast_i';

wallTypes["442"] = 'w_southeast_i';


wallTypes["183"] = 'w_northeast_i';
wallTypes["347"] = 'w_northwest_i';

wallTypes["217"] = 'w_southwest_i';
wallTypes["91"] = 'w_northwest_i';
wallTypes["283"] = 'w_northwest_i';
wallTypes["31"] = 'w_northwest_i';


wallTypes["149"] = 'center';
wallTypes["147"] = 'center';
wallTypes["467"] = 'center';
wallTypes["150"] = 'center';
wallTypes["119"] = 'center';
wallTypes["95"] = 'center';
wallTypes["287"] = 'center';
wallTypes["369"] = 'center';
wallTypes["208"] = 'center';
wallTypes["282"] = 'center';
wallTypes["400"] = 'center';
wallTypes["178"] = 'center';
wallTypes["470"] = 'center';
wallTypes["276"] = 'center';
wallTypes["177"] = 'center';
wallTypes["305"] = 'center';
wallTypes["336"] = 'center';
wallTypes["112"] = 'center';
wallTypes["152"] = 'center';
wallTypes["304"] = 'center';
wallTypes["408"] = 'center';
wallTypes["307"] = 'center';
wallTypes["19"] = 'center';
wallTypes["21"] = 'center';
wallTypes["153"] = 'center';
wallTypes["465"] = 'center';
wallTypes["278"] = 'center';
wallTypes["88"] = 'center';
wallTypes["176"] = 'center';
wallTypes["145"] = 'center';
wallTypes["82"] = 'center';
wallTypes["468"] = 'center';
wallTypes["279"] = 'center';
wallTypes["274"] = 'center';
wallTypes["209"] = 'center';
wallTypes["148"] = 'center';
wallTypes["80"] = 'center';
wallTypes["23"] = 'center';
wallTypes["24"] = 'center';
wallTypes["26"] = 'center';
wallTypes["52"] = 'center';
wallTypes["87"] = 'center';
wallTypes["151"] = 'center';
wallTypes["121"] = 'center';
wallTypes["144"] = 'center';

// Could be changed to something cooler
// ---
wallTypes["308"] = 'arrow_right';
wallTypes["372"] = 'arrow_right';
wallTypes["48"] = 'arrow_right';
wallTypes["446"] = 'pipe_right';
wallTypes["251"] = 'pipe_left';
wallTypes["466"] = 'pipe_down';
wallTypes["89"] = 'arrow_left';
wallTypes["146"] = 'slim_vertical';
// ---


wallTypes["273"] = 'center';
wallTypes["120"] = 'center';
wallTypes["316"] = 'center';
wallTypes["16"] = 'center';
wallTypes["17"] = 'center';
wallTypes["81"] = 'center';
wallTypes["84"] = 'center';
wallTypes["345"] = 'center';
wallTypes["28"] = 'center';
wallTypes["20"] = 'center';
wallTypes["213"] = 'center';
wallTypes["272"] = 'center';
wallTypes["464"] = 'center';
wallTypes["49"] = 'center';

// wallTypes["56"] = 'w_south';




var wall = {

    determineFrom : function(view) {
	return this.typeFrom(this.toBits(view));
    },

    typeFrom : function(matrix) {
	var x = 0;
	for (var i = 0; i < matrix.length; i++) {
	    for (var j = 0; j < matrix[0].length; j++) {
		x += matrix[i][j];
	    }
	}
	
	return (wallTypes[x] === undefined) ? x : wallTypes[x];
    },

    toBits : function(view) {
	var bits = [[0, 0, 0],
		    [0, 0, 0],
		    [0, 0, 0]];

	var n = 0;
	for (var i = view[0].length - 1; i >= 0; i--) {
	    for (var j = view.length - 1; j >= 0; j--) {
		if (view[i][j] == 'w') {
		    bits[i][j] = Math.pow(2, n); 
		}
		n++;
	    }
	}
	return bits;
    },
}

module.exports = wall;